<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>River Litter</title>
    <style>
        /* [Previous CSS remains unchanged] */
        
        /* Add new style for milestone message */
        #milestoneMessage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.5em;
            text-align: center;
            z-index: 20;
            display: none;
            animation: fadeInOut 3s ease-in-out;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <!-- [Previous HTML remains unchanged] -->
        
        <!-- Add milestone message element -->
        <div id="milestoneMessage"></div>
    </div>

    <script>
        // [Previous game variables remain unchanged]
        
        // Add milestone flag
        let milestoneShown = false;
        
        // [Previous sound variables remain unchanged]
        
        // [Previous difficulty settings remain unchanged]
        
        // DOM elements
        // [Previous DOM elements remain unchanged]
        const milestoneMessage = document.getElementById('milestoneMessage');
        
        // [Previous event listeners remain unchanged]
        
        // Start game function
        function startGame(difficulty) {
            currentDifficulty = difficulty;
            const settings = difficultySettings[difficulty];
            
            // Reset game state with difficulty settings
            score = 0;
            lives = settings.lives;
            gameActive = true;
            trashSpeed = settings.initialSpeed;
            spawnInterval = settings.initialSpawnInterval;
            victoryScore = settings.victoryScore;
            milestoneShown = false; // Reset milestone flag
            
            // [Rest of startGame function remains unchanged]
        }
        
        // [gameOver and victory functions remain unchanged]
        
        // Spawn trash function
        function spawnTrash() {
            if (!gameActive) return;
            
            const trash = document.createElement('div');
            trash.className = 'trash';
            
            // [Previous trash positioning code remains unchanged]
            
            // Add click event
            trash.addEventListener('click', () => {
                if (!gameActive) return;
                
                // Remove trash
                trash.remove();
                trashElements = trashElements.filter(t => t !== trash);
                
                // Play pop sound
                popSound.currentTime = 0;
                popSound.play().catch(e => console.log("Audio play failed:", e));
                
                // Increase score
                score++;
                scoreDisplay.textContent = `Score: ${score}`;
                
                // Check for milestone
                if (!milestoneShown && score > victoryScore / 2) {
                    showMilestone();
                    milestoneShown = true;
                }
                
                // [Rest of click event code remains unchanged]
            });
            
            gameContainer.appendChild(trash);
            trashElements.push(trash);
        }
        
        // Show milestone message
        function showMilestone() {
            milestoneMessage.textContent = "Almost there! Keep up the good work!";
            milestoneMessage.style.display = 'block';
            
            // Hide after animation completes
            setTimeout(() => {
                milestoneMessage.style.display = 'none';
            }, 3000);
        }
        
        // [gameLoop function remains unchanged]
    </script>
</body>
</html>
